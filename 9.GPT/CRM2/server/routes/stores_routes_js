
const express = require("express");
const router = express.Router();
const db = require("../config/db_js");

router.get("/", (req,res)=>{
  const page = Number(req.query.page||1);
  const size = 10;
  const offset = (page-1)*size;
  const rows = db.prepare("SELECT * FROM stores LIMIT ? OFFSET ?").all(size, offset);
  const total = db.prepare("SELECT COUNT(*) cnt FROM stores").get().cnt;
  res.json({rows, total});
});

module.exports = router;
